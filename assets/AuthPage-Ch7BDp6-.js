import{c as u,u as L,r as n,m as z,n as _,p as $,q as k,j as e,U as W,t as q,v as R,w as D,x as J}from"./index-_y5Inmo1.js";import{M as O}from"./mail-bpSQi1gT.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],T=u("ArrowRight",B);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Y=u("EyeOff",V);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H=u("Eye",G);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Q=u("Info",K);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Z=u("Lock",X),m=q(),ae=()=>{const y=L(),[a,I]=n.useState(!0),[f,E]=n.useState(!1),[t,b]=n.useState({email:"",username:"",password:""}),[d,w]=n.useState(!1),[C,g]=n.useState(!1),[N,r]=n.useState(""),[j,o]=n.useState(""),[h,c]=n.useState(!1),[P,v]=n.useState(null);console.log(P);const S=n.useCallback(()=>{y("/profile")},[y]);n.useEffect(()=>{const l=z(m,s=>{s&&S()});return()=>l()},[S]),n.useEffect(()=>{if(_(m,window.location.href)){let l=localStorage.getItem("emailForSignIn");l||(l=window.prompt("Please provide your email for confirmation")),c(!0);const s=localStorage.getItem("isNewUser")==="true",x=localStorage.getItem("usernameForSignIn");$(m,l,window.location.href).then(i=>s&&x&&i.user?k(i.user,{displayName:x}).then(()=>i):i).then(i=>{localStorage.removeItem("emailForSignIn"),localStorage.removeItem("isNewUser"),localStorage.removeItem("usernameForSignIn"),o(`Successfully ${s?"created account":"signed in"} with email link!`),console.log("User signed in:",i.user)}).catch(i=>{r("Error signing in with email link: "+i.message)}).finally(()=>{c(!1)})}},[]);const p=l=>{const{name:s,value:x}=l.target;b(i=>({...i,[s]:x})),r(""),o(""),g(!1)},U=l=>{l.preventDefault(),c(!0),d?A():a?R(m,t.email,t.password).then(s=>{v(s.user.uid),o("Successfully signed in!")}).catch(s=>{s.code==="auth/invalid-credential"?r("Invalid email or password. Please try again."):r("Error signing in: "+s.message)}).finally(()=>{c(!1)}):D(m,t.email,t.password).then(s=>k(s.user,{displayName:t.username}).then(()=>s)).then(s=>{v(s.user.uid),o("Account created successfully!")}).catch(s=>{s.code==="auth/email-already-in-use"?r("Email is already in use. Please use a different email or sign in."):s.code==="auth/weak-password"?r("Password is too weak. Please use a stronger password."):r("Error creating account: "+s.message)}).finally(()=>{c(!1)})},A=()=>{const l={url:window.location.origin+window.location.pathname,handleCodeInApp:!0};J(m,t.email,l).then(()=>{localStorage.setItem("emailForSignIn",t.email),a?(localStorage.removeItem("usernameForSignIn"),localStorage.setItem("isNewUser","false")):(localStorage.setItem("usernameForSignIn",t.username),localStorage.setItem("isNewUser","true")),g(!0),o(`A sign-in link has been sent to ${t.email}`)}).catch(s=>{r("Error sending email link: "+s.message)}).finally(()=>{c(!1)})},M=()=>{I(!a),w(!1),g(!1),r(""),o(""),c(!1),b({email:"",username:a?"":t.username,password:""})},F=()=>{w(!d),r(""),o("")};return e.jsxs("div",{className:"flex flex-col md:flex-row h-[calc(100vh-76px)] bg-gray-900 text-white overflow-hidden",children:[e.jsx("div",{className:"w-full md:w-1/2 h-full flex items-center justify-center p-4 md:p-8 lg:p-12",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:a?"Welcome Back":"Create Account"}),e.jsx("p",{className:"text-gray-400",children:a?"Sign in to access your account":"Sign up to get started with coding"})]}),C?e.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg text-center",children:[e.jsx(Q,{size:32,className:"mx-auto mb-4 text-blue-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"mb-4",children:["We have sent a sign-in link to ",e.jsx("strong",{children:t.email}),". Click the link to complete the"," ",a?"sign-in":"registration"," process."]}),e.jsx("button",{onClick:()=>g(!1),className:"text-blue-500 hover:underline",children:"Use a different email"})]}):e.jsxs("form",{onSubmit:U,className:"space-y-5",children:[!a&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(W,{size:18,className:"text-gray-500"})}),e.jsx("input",{type:"text",id:"username",name:"username",value:t.username,onChange:p,className:"bg-gray-700 border border-gray-600 text-white rounded-lg block w-full pl-10 p-2.5 focus:border-blue-500 focus:ring-blue-500 focus:outline-none",placeholder:"username",required:!a})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(O,{size:18,className:"text-gray-500"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:p,className:"bg-gray-700 border border-gray-600 text-white rounded-lg block w-full pl-10 p-2.5 focus:border-blue-500 focus:ring-blue-500 focus:outline-none",placeholder:"name@example.com",required:!0})]})]}),!d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium",htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(Z,{size:18,className:"text-gray-500"})}),e.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:t.password,onChange:p,className:"bg-gray-700 border border-gray-600 text-white rounded-lg block w-full pl-10 pr-10 p-2.5 focus:border-blue-500 focus:ring-blue-500 focus:outline-none",placeholder:"••••••••",required:!d}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3",onClick:()=>E(!f),children:f?e.jsx(Y,{size:18,className:"text-gray-500 hover:text-gray-300"}):e.jsx(H,{size:18,className:"text-gray-500 hover:text-gray-300"})})]}),a&&e.jsx("div",{className:"flex justify-end",children:e.jsx("a",{href:"#",className:"text-sm text-blue-500 hover:underline",children:"Forgot password?"})})]}),N&&e.jsx("div",{className:"bg-red-900/50 border border-red-800 text-red-100 px-4 py-2 rounded-md",children:N}),j&&e.jsx("div",{className:"bg-green-900/50 border border-green-800 text-green-100 px-4 py-2 rounded-md",children:j}),e.jsxs("button",{type:"submit",disabled:h,className:`w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 focus:ring-4 focus:ring-green-800 font-medium rounded-lg px-5 py-2.5 text-white transition-all duration-200 ${h?"opacity-70 cursor-not-allowed":""}`,children:[h?e.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):null,d?`Send ${a?"Sign-in":"Registration"} Link`:a?"Sign In":"Sign Up",!h&&e.jsx(T,{size:18})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-400",children:[a?"Don't have an account?":"Already have an account?",e.jsx("button",{type:"button",onClick:M,className:"ml-1 text-green-500 hover:underline focus:outline-none",children:a?"Sign Up":"Sign In"})]})}),e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("hr",{className:"w-full border-gray-600"}),e.jsx("span",{className:"absolute bg-gray-800 px-2 text-gray-400 text-sm",children:"OR"})]}),e.jsx("button",{type:"button",onClick:F,className:"w-full flex items-center justify-center gap-2 bg-gray-700 hover:bg-gray-600 focus:ring-4 focus:ring-gray-600 font-medium rounded-lg px-5 py-2.5 text-white transition-all duration-200",children:d?"Use Password Instead":`${a?"Sign In":"Sign Up"} Without Password`})]})]})}),e.jsx("div",{className:"hidden md:flex md:w-1/2 bg-gray-800 h-full",children:e.jsx("div",{className:"flex flex-col items-center justify-center w-full p-8 lg:p-12",children:e.jsxs("div",{className:"max-w-lg text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Code Anywhere, Anytime"}),e.jsx("p",{className:"text-xl mb-8 text-gray-300",children:"Join our coding platform and take your programming skills to the next level"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-900 p-5 rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Multi-language Support"}),e.jsx("p",{className:"text-gray-400",children:"JavaScript, Python, Java, C++, and more!"})]}),e.jsxs("div",{className:"bg-gray-900 p-5 rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Interactive Challenges"}),e.jsx("p",{className:"text-gray-400",children:"Practice with real-world coding problems"})]}),e.jsxs("div",{className:"bg-gray-900 p-5 rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Collaborative Editing"}),e.jsx("p",{className:"text-gray-400",children:"Code together in real-time with team members"})]}),e.jsxs("div",{className:"bg-gray-900 p-5 rounded-lg",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Cloud Saves"}),e.jsx("p",{className:"text-gray-400",children:"Access your projects from any device"})]})]})]})})})]})};export{ae as default};
